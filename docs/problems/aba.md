# 非同期ビザンチン合意問題 (Asynchronous Byzantine Agreement)

## 概要

**非同期ビザンチン合意 (ABA)** とは、分散コンピューティングにおける最も困難な状況下での合意形成問題の一つです。

この問題では、複数のコンピューター（プロセス）が、以下の2つの厳しい制約の中で、全員で**単一の値（通常は0か1のバイナリ値）**に合意することを目指します。

1.  **非同期ネットワーク**: プロセス間で送受信されるメッセージが、いつ相手に届くか全く予測できません。無限に遅延する可能性もあります。
2.  **ビザンチン故障**: プロセスの中に、故障によって予測不能な振る舞いをする「裏切り者」が存在する可能性があります。裏切り者は、嘘をついたり、人によって違う内容を伝えたりして、合意を積極的に妨害します。

> **一言でいうと**
> 「返信がいつ来るか分からない、しかも裏切り者がいるかもしれないLINEグループで、全員の意見を『はい』か『いいえ』のどちらか一つに完全に一致させる」ような問題です。

## 達成すべき3つの性質

正しいABAプロトコルは、以下の3つの条件を必ず満たさなければなりません。

* **1. 合意性 (Agreement)**
    裏切り者ではない、正常なプロセスは**全員が必ず同じ値**（全員が0、または全員が1）に決定しなければなりません。

* **2. 正当性 (Validity)**
    もし、全ての正常なプロセスが最初から同じ値 `v` (0か1) を提案していた場合、最終的に全員が決定する値も `v` でなければなりません。勝手に値が変わってはいけません。

* **3. 終了性 (Termination)**
    全ての正常なプロセスは、**有限時間内に必ず値を決定**し、処理を終了しなければなりません。永遠に悩み続けることは許されません。

## なぜ重要なのか？

ABAは、それ自体が重要な問題であると同時に、より複雑な合意問題（例えば、複数の選択肢から一つを選ぶ**多値ビザンチン合意 - MBA**）を解くための**基本的な構成要素（ビルディングブロック）**として利用されます。

現実のインターネットは遅延が予測不能な非同期ネットワークに近いため、ABAは非常に実践的で重要なモデルなのです。

## 難しさと解決策

有名な**FLP不可能性定理**により、「非同期ネットワークでは、たった一つの故障プロセスがあるだけで、決定的な合意は不可能」であることが証明されています。

この困難を乗り越えるため、多くのABAプロトコルは**乱数（ランダム性）**を利用します。各プロセスが「コイントス」のようなランダムな選択を行うことで、確率的に合意を成立させ、終了性を保証します。Ben-Orによって提案されたアルゴリズムが、このアプローチの古典的な例として知られています。
